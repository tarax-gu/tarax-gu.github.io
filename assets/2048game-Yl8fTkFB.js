import{d as M,i as w,m as N,n as V,p as F,q as S,c as s,a as f,w as o,F as _,l as b,u as c,r as E,o as n,b as d,t as y,g as B,k as U,e as j,E as x,v as q}from"./index-BuEscAmn.js";const K={class:"bordered-main"},R={style:{width:"100px",height:"100px"}},G=M({__name:"2048game",setup(T){var l=w([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]);const h=N(()=>{let u=0;for(let e=0;e<l.value.length;e++)for(let a=0;a<l.value[e].length;a++)u+=l.value[e][a];return u});var v=w(!1);V(v,(u,e)=>{u==!1&&e==!0&&(console.log("over"),alert("游戏结束，您的得分为"+h.value))}),F(()=>{document.addEventListener("keydown",m)}),S(()=>{document.removeEventListener("keydown",m)});function m(u){if(v.value==!0)switch(u.key){case"ArrowUp":i("up");break;case"ArrowDown":i("down");break;case"ArrowLeft":i("left");break;case"ArrowRight":i("right");break}}function C(){l.value.forEach((u,e)=>{u.forEach((a,t)=>{l.value[e][t]=0}),v.value=!0})}function p(){for(let u=0;u<l.value.length;u++)for(let e=0;e<l.value[u].length;e++)if(l.value[u][e]==0)return!0;for(let u=0;u<l.value.length-1;u++)for(let e=0;e<l.value[u].length-1;e++)if(l.value[u][e]==l.value[u+1][e]||l.value[u][e]==l.value[u][e+1])return!0;return!1}function A(){const u=Math.random();return u<.8?2:u<.9?4:u<.95?8:u<.99?16:32}function g(){let u=[];if(l.value.forEach((e,a)=>{e.forEach((t,r)=>{t==0&&u.push([a,r])})}),u.length!=0){let e=Math.floor(Math.random()*u.length),a=A();l.value[u[e][0]][u[e][1]]=a}}function i(u){if(u=="up"){for(let e=0;e<4;e++)for(let a=1;a<4;a++)if(l.value[a][e]!=0){let t=a-1;for(;t>=0&&l.value[t][e]==0;)t--;if(t<0)l.value[0][e]=l.value[a][e],l.value[a][e]=0;else if(l.value[t][e]==l.value[a][e])l.value[t][e]=2*l.value[t][e],l.value[a][e]=0;else{let r=l.value[a][e];l.value[a][e]=0,l.value[t+1][e]=r}}}if(u=="down"){for(let e=0;e<4;e++)for(let a=2;a>=0;a--)if(l.value[a][e]!=0){let t=a+1;for(;t<4&&l.value[t][e]==0;)t++;if(t>=4)l.value[3][e]=l.value[a][e],l.value[a][e]=0;else if(l.value[t][e]==l.value[a][e])l.value[t][e]=2*l.value[t][e],l.value[a][e]=0;else{let r=l.value[a][e];l.value[a][e]=0,l.value[t-1][e]=r}}}if(u=="left"){for(let e=0;e<4;e++)for(let a=1;a<4;a++)if(l.value[e][a]!=0){let t=a-1;for(;t>=0&&l.value[e][t]==0;)t--;if(t<0)l.value[e][0]=l.value[e][a],l.value[e][a]=0;else if(l.value[e][t]==l.value[e][a])l.value[e][t]=2*l.value[e][t],l.value[e][a]=0;else{let r=l.value[e][a];l.value[e][a]=0,l.value[e][t+1]=r}}}if(u=="right"){for(let e=0;e<4;e++)for(let a=2;a>=0;a--)if(l.value[e][a]!=0){let t=a+1;for(;t<4&&l.value[e][t]==0;)t++;if(t>=4)l.value[e][3]=l.value[e][a],l.value[e][a]=0;else if(l.value[e][t]==l.value[e][a])l.value[e][t]=2*l.value[e][t],l.value[e][a]=0;else{let r=l.value[e][a];l.value[e][a]=0,l.value[e][t-1]=r}}}g(),v.value=p(),console.log(p())}return(u,e)=>{const a=E("el-row"),t=E("el-col");return n(),s("div",K,[f(a,null,{default:o(()=>[d("div",null,"分数："+y(h.value),1)]),_:1}),(n(!0),s(_,null,b(c(l),(r,D)=>(n(),B(a,{key:D,gutter:10},{default:o(()=>[(n(!0),s(_,null,b(r,(k,L)=>(n(),B(t,{key:L,span:6},{default:o(()=>[d("div",R,[U(d("div",{class:"grid-content"},y(k),513),[[q,k]])])]),_:2},1024))),128))]),_:2},1024))),128)),f(c(x),{onClick:g},{default:o(()=>[j("开始游戏")]),_:1}),f(c(x),{onClick:C},{default:o(()=>[j("重新开始")]),_:1})])}}});export{G as default};
