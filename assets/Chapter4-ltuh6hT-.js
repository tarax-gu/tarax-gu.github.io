import{_ as I,r as u,o as d,m as h,b as i,w as t,p,i as a,a as l,e as n}from"./index-DBKJjhjt.js";const r={},C=e=>(p("data-v-3eb74503"),e=e(),a(),e),_={class:"container"},v=C(()=>l("div",{class:"content"},[l("h1",{id:"section4"},"第四章 网络层"),l("h2",{id:"section4.1"},"4.1网络层的功能"),l("p",null," 网络层提供主机到主机的通信服务，主要任务式将分组从源主机经过多个网络和多段链路传输跳转到目的主机。 该任务可划分为分组转发和路由选择两种重要功能。 "),l("h3",{id:"section4.1.1"},"4.1.1异构网络互连"),l("p",null," 网络层需要将异构的网络连接在一起。 通过一定的方法，用一些中继系统将网络连接起来，以构成更大的网络系统。 "),l("h3",{id:"section4.1.2"},"4.1.2路由与转发"),l("p",null," 路由器主要完成两个功能：路由选择和分组转发。 "),l("h3",{id:"section4.1.3"},"4.1.3网络层提供的两种服务"),l("ul",null,[l("li",null,"虚电路"),l("li",null,"数据报")]),l("h3",{id:"section4.1.4"},"4.1.4SDN的基本概念"),l("p",null," 软件定义网络（SDN）是近年来流行的一种创新网络架构，采用控制平面和数据平面分离的策略。 SDN给开发者提供的接口被称为北向接口； 控制器和转发设备连接的接口叫做南向接口，通过不同的南向接口协议（如openflow）,即可兼容不同的硬件设备。 "),l("h3",{id:"section4.1.5"},"4.1.5拥塞控制"),l("p",null," 出现过量的分组而引起网络性能下降的现象称为拥塞。拥塞控制的方法有两种：开环控制和闭环控制。 "),l("h2",{id:"section4.2"},"4.2 IPV4"),l("h3",{id:"section4.2.1"},"4.2.1 IPv4分组"),l("p",null," IPv4即现在普遍使用的网际协议（IP）。IP数据报首部有20B，其中首部长度、总长度、片偏移分别占4B、1B、8B。 当IP数据报的大小超过最大传送单元（MTU）时，需要进行分片，标识位DF，MF。 "),l("h3",{id:"section4.2.2"},"4.2.2IPv4地址与NAT"),l("p",null," ip地址是给互联网上的每台主机的每个接口分配一个在全球范围内唯一的32位标识符。由网络号和主机号组成。 网络地址转换(NAT)是指将专用网络地址转换为公用地址，从而对外隐藏内部管理的IP地址。 "),l("h3",{id:"section4.2.3"},"4.2.3划分子网与路由聚合"),l("p",null," IP地址中加入子网号网段，使两级ip地址变成3级ip地址。 子网掩码可以指明分类IP地址的主机号部分有多少位为子网号。 默认网关是子网和外部网络连接的设备，当目的主机不在子网中，就发送给默认网关。 无分类编址(CIDR)提出消除传统的ABC类地址及划分子网的概念，网络前缀的长度不确定。 通过CIDR地址块进行路由聚合，形成超网。 CIDR转发采用最长前缀匹配的方式。 "),l("h3",{id:"section4.2.4"},"4.2.4 网络层转发分组过程"),l("p",null," 通过目的网络地址与下一跳地址进行转发。 默认路由通常用于路由器到互联网的路由。 "),l("h3",{id:"section4.2.5"},"4.2.5 地址解析协议(ARP)"),l("p",null," 网络层及网络层以上使用IP地址，数据链路层使用MAC地址。 在实际网络的链路上传送数据帧时必须使用MAC地址，地址解析协议(ARP)完成IP地址到MAC地址的映射。 每台主机有一个ARP高速缓存，动态维护映射表。 "),l("h3",{id:"section4.2.6"},"4.2.6 动态主机配置协议(DHCP)"),l("p",null,[l("ul",null,[n(" 动态主机配置协议用于给主机动态地分配IP地址。DHCP是应用层协议，基于UDP。 "),l("li",null,"DHCP客户首先广播“DHCP发现”报文"),l("li",null,"DHCP服务器广播“DHCP提供”报文"),l("li",null,"DHCP客户广播“DHCP请求”报文"),l("li",null,"DHCP服务器广播“DHCP确认”消息")])]),l("h3",{id:"section4.2.7"},"4.2.7 网际报文控制协议(ICMP)"),l("ul",null,[n("为了有效地转发IP数据报和提高交付成功的机会，在网络层使用ICMP，让主机或路由器报告差错和异常情况。 ICMP报文有两种，即ICMP差错报告报文和ICMP询问报文。 "),l("li",null,"ICMP差错报告报文。共有以下5种常用类型：终点不可达、源点抑制、超时、参数问题、路由改变（重定向）"),l("li",null,"ICMP询问报文。有4种类型：回送请求和回答报文、时间戳请求和回答报文、地址掩码请求和回答报文、路由器询问和通告报文")]),l("h2",{id:"section4.3"},"4.3 IPv6"),l("p",null,"到2011年2月,IPv4地址已经耗尽，为了解决该问题，有如下措施：采用无类别编址CIDR、网络地址转换NAT，使用IPv6. IPv6可以从根本上解决IP地址耗尽的问题。 "),l("h3",{id:"section4.3.1"},"4.3.1 IPv6特点"),l("ul",null,[l("li",null,"更大的地址空间（128位）"),l("li",null,"扩展的地址层次结构"),l("li",null,"灵活的首部格式"),l("li",null,"改进的选项"),l("li",null,"允许协议继续扩充"),l("li",null,"支持即插即用（即自动配置）"),l("li",null,"支持资源的预分配"),l("li",null,"只有源主机才能分片"),l("li",null,"首部长度固定40B"),l("li",null,"增大了安全性")]),l("h3",{id:"section4.3.2"},"4.3.2 IPv6数据报的基本首部"),l("p",null," IPv6数据包由两部分组成：基本首部和有效载荷。 基本首部包含如下字段：版本、通信量类、流标号、有效载荷长度、下一个首部、跳数限制、源地址和目的地址。 "),l("h3",{id:"section4.3.3"},"4.3.3 IPv6地址"),l("p",null," IPv6数据报的目的地址有以下三种基本类型：单播、多播、任播。 IPv6地址分类如下：未指明地址、环回地址、多播地址、本地链路单播地址、全球单播地址。 "),l("h3",{id:"section4.3.4"},"4.3.3 从IPv4向IPv6地址过渡"),l("p",null," 一般有如下两种策略：双协议栈、隧道技术。 "),l("h2",{id:"section4.4"},"4.4 路由算法与路由协议"),l("h3",{id:"section4.4.1"},"4.4.1 路由算法"),l("ul",null,[n("路由选择协议的核心是路由算法。 "),l("li",null,"静态路由与动态路由"),l("li",null,"距离向量路由算法"),l("li",null,"链路状态路由算法")]),l("h3",{id:"section4.4.2"},"4.4.2 分层次的路由选择协议"),l("ul",null,[n("互联网采用的是自适应的分布式路由选择协议。互联网划分成许多较小的自治系统。 "),l("li",null,"内部网关协议。即在自治系统内的协议。"),l("li",null,"外部网关协议。即自治系统之间。")]),l("h3",{id:"section4.4.3"},"4.4.3 路由信息协议(RIP)"),l("p",null," RIP是一种分布式的基于距离向量的路由选择协议(应用层,使用udp)。RIP规定每个路由器都要维护从自身到每个目的网络的距离记录，即距离向量。 使用跳数来衡量到达目的网络的距离。好的路由就是经过的路由器数目少。路径最多包含15个路由器。关键字段[目的网络N，条数d，下一跳路由器地址X] "),l("ul",null,[n(" RIP的优点： "),l("li",null,"实现简单、开销小、收敛速度快"),l("li",null,"好消息传播快"),n(" RIP的缺点： "),l("li",null,"限制网络规模"),l("li",null,"网络规模越大，开销越大"),l("li",null,"坏消息传播的慢")]),l("h3",{id:"section4.4.4"},"4.4.4 开放最短路径优先(OSPF)协议"),l("p",null," OSPF特点如下：向本自治系统中所有路由器发送消息。 发送的消息仅是与本路由器相邻的所有路由器的链路状态。 链路变化时，才泛洪地发送消息。 是网络层协议，使用IP数据报。 "),l("ul",null,[n(" OSPF的分组类型 "),l("li",null,"问候分组"),l("li",null,"数据库描述分组"),l("li",null,"链路状态请求分组"),l("li",null,"链路状态更新分组"),l("li",null,"链路状态确认分组")]),l("h3",{id:"section4.4.5"},"4.4.5 边界网关协议(BGP)"),l("p",null," BGP协议是不同自治系统间交换路由信息的协议，是基于TCP的应用层协议。 BGP使用4种报文：打开、更新、保活、通知。 "),l("ul",null,[n(" BGP的工作原理： "),l("li",null,"选择发言人(边界路由器)"),l("li",null,"建立TCP连接，建立BGP会话"),l("li",null,"交换路由信息")]),l("h2",{id:"section4.5"},"4.5 IP多播"),l("h3",{id:"section4.5.1"},"4.5.1多播的概念"),l("p",null," 多播是让源主机一次发送的单个分组可以抵达用一个组地址标识的若干目的主机，即一对多的通信。 "),l("h3",{id:"section4.5.2"},"4.5.2IP 多播地址"),l("ul",null,[n(" 使用D类IP地址作为目的地址，并且首部中协议字段为2，表明使用IGMP协议。 "),l("li",null,"不提供可靠交付"),l("li",null,"多播地址只用于目的地址"),l("li",null,"不产生ICMP差错报文")]),l("h3",{id:"section4.5.3"},"4.5.3 在局域网上进行硬件多播"),l("p",null," 在局域网内，只需要将IP多播地址映射成多播MAC地址，即可将数据包封装在局域网的MAC帧中， 这样可以很方便的实现局域网内的IP多播。 "),l("h3",{id:"section4.5.4"},"4.5.4 IGMP与多播路由协议"),l("p",null," 让连接到本地局域网的多播路由器，知道本局域网上是否有主机参加或退出了某个多播组。 IGMP报文被封装在IP数据报中传送，但它也向IP提供服务。 "),l("h2",{id:"section4.6"},"4.6移动IP"),l("h3",{id:"section4.6.1"},"4.6.1移动IP的概念"),l("p",null," 移动IP技术是指移动站以固定的IP地址实现跨越不同网络的漫游功能。 即解决在移动站漫游时保证TCP连接的问题。 "),l("h3",{id:"section4.6.2"},"4.6.2移动IP过程"),l("ul",null,[n(" 每个移动站都有一个永久地址，原始连接网络为归属网络。 "),l("li",null,"归属代理。"),l("li",null,"外地代理。为移动站创建临时地址，称为转交地址；及时把转交地址告诉其归属代理")]),l("h2",{id:"section4.7"},"4.7网络层设备"),l("h3",{id:"section4.7.1"},"4.7.1冲突域和广播域"),l("p",null," 冲突域指连接到同一物理介质上的所有的节点的集合。广播域指能收到同样广播消息的结点集合。 "),l("h3",{id:"section4.7.2"},"4.7.2路由器的功能"),l("ul",null,[n(" 路由器的结构： "),l("li",null," 路由选择。也称控制部分"),l("li",null," 分组转发。交换组织。"),n(" 路由器的输入端口在物理层接受比特流，在数据链路层提取出帧。 输出端口执行相反的操作，还设有一个缓冲队列进行差错检验。 ")]),l("h3",{id:"section4.7.3"},"4.7.3路由表与分组转发"),l("p",null," 路由表是根据路由算法得出的，用于路由选择。 转发表是根据路由表得出的转发对应关系。 "),l("br"),l("br"),l("br"),l("br"),l("br")],-1));function D(e,M){const c=u("el-col"),o=u("el-anchor-link"),P=u("el-anchor"),s=u("el-row");return d(),h("div",_,[i(s,{style:{height:"100%"}},{default:t(()=>[i(c,{span:18},{default:t(()=>[v]),_:1}),i(c,{span:6,style:{}},{default:t(()=>[i(P,null,{default:t(()=>[i(o,{href:"#section1",title:"part1"}),i(o,{href:"#section1.1",title:"part2"}),i(o,{href:"#section1.1.1",title:"part3"})]),_:1})]),_:1})]),_:1})])}const B=I(r,[["render",D],["__scopeId","data-v-3eb74503"]]);export{B as default};
